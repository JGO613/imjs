>> Local Npm module "grunt-mocha-phantomjs" not found. Is it installed?

Running "jshint:grunt" (jshint) task
>> 2 files lint free.

Running "jshint:tests" (jshint) task
>> 1 file lint free.

Running "coffeelint:source" (coffeelint) task
>> 19 files lint free.

Running "coffeelint:mocha" (coffeelint) task
>> 64 files lint free.

Running "clean:build" (clean) task
>> 1 path cleaned.

Running "clean:tests" (clean) task
>> 1 path cleaned.

Running "compile:source" (compile) task
>> done: compiled 21 coffee-script files to build.

Running "compile:shims" (compile) task
>> done: compiled 1 coffee-script files to build/shims.

Running "compile:tests" (compile) task
>> done: compiled 64 coffee-script files to test/compiled.

Running "compile:testlib" (compile) task
>> done: compiled 5 coffee-script files to test/compiled/lib.

Running "-inject-version" task
Injected version

Running "browserify:dist" (browserify) task
>> Bundle dist/im.js created.

Running "browserify:tests" (browserify) task
>> Bundle test/browser/mocha-test.js created.

Running "uglify:bundle" (uglify) task
>> 1 file created 453.54 kB → 185.22 kB

Running "copy:dist" (copy) task
Copied 2 files

Running "copy:version" (copy) task
Copied 2 files

Running "mocha-node" task

Running "-set-test-files" task

Running "mochaTest:unit" (mochaTest) task


  utils
    Type Checking
      A function
        ✓ should be a function
        ✓ should not be an array
      An object
        ✓ should not be a function
        ✓ should not be an array
      An array
        ✓ should not be a function
        ✓ should be an array
      A regex
        ✓ should not be a function
        ✓ should not be an array
      A date
        ✓ should not be a function
        ✓ should not be an array
      A string
        ✓ should not be a function
        ✓ should not be an array
      A number
        ✓ should not be a function
        ✓ should not be an array
      A boolean
        ✓ should not be a function
        ✓ should not be an array
      null
        ✓ should not be a function
        ✓ should not be an array
    isArray
      ✓ should agree that [] is an array
      ✓ should agree that [1, 2, 3] is an array
    querystring
      from pairs
        ✓ should make "foo=bar" from [["foo", "bar"]]
        ✓ should make "" from [["foo", null]]
        ✓ should make "a=b&c=d" from [["a", "b"], ["c", "d"]]
        ✓ should make "a=1&a=2" from [["a", 1],["a",2]]
        ✓ should make "key=some%20value" from [["key", "some value"]]
      from object
        ✓ should make "foo=bar" from {"foo": "bar"}
        ✓ should make "" from {"foo": undefined}
        ✓ should make "a=b&c=d" from {"a": "b", "c": "d"}
        ✓ should make "a=1&a=2" from {"a": [1, 2]}
        ✓ should make "key=some%20value" from {"key": "some value"}
    curry
      ✓ can produce a partially applied function
      ✓ can partially apply all arguments
    error
      ✓ should be a failed promise
    success
      ✓ should be a resolved promise
    defer
      resolution
        ✓ should be a thenable
        ✓ should have been resolved
      rejection
        ✓ should be a thenable
        ✓ should have been rejected
    the result of thenning a rejected promise
      ✓ should be a thenable
      ✓ should have been rejected
    fold
      the sum of an empty list with an initial state.
        ✓ should equal 0
      the sum of a non-empty list with an initial state.
        ✓ should equal 106
      the attempt to call sum with no arguments
        ✓ should throw an error
      the sum of a non-empty list
        ✓ should equal 6
      the sum of an empty list with no init
        ✓ should be undefined
    take
      take 2
        ✓ should retrieve the first 2 items from an array
        ✓ should retrieve as many items as possible
        ✓ should not alter the input
    filter
      the first 5 even numbers
        ✓ should contain 5 items
        ✓ should be [2, 4, 6, 8, 10]
    uniqBy
      using a hashable key
        ✓ should get only one string of each length
      using a non-hashable-key
        ✓ should reduce the list to three items
        ✓ should have unique keys
      calling uniqBy with both arguments
        ✓ should work as it would if curried
    any
      The first ten numbers
        ✓ should contain a truthy value
        ✓ should contain an even number
        ✓ should not contain a number above ten
    Searching in
      The first ten numbers
        for even numbers
          ✓ should find two
        for numbers above ten
          ✓ should not find anything
    escape
      escaping "foo"
        ✓ should not have changed anything
      escaping "foo said "bar's dumb", & walked off >.<"
        ✓ should have escaped all the XML entities
      escaping "всем привет"
        ✓ should have escaped all the unicode characters
    omap
      an inverter
        ✓ should invert objects
    copy
      a copy of an object
        ✓ should be equal to its source
      an altered clone
        ✓ should not be connected
    partitioning
      the first ten numbers into evens and odds
        ✓ should produce a collection of evens, and one of odds
    id
      ✓ should be a function
      ✓ should return its input
    concatMap
      Getting the first three powers of the first three numbers
        ✓ should return [1, 1, 1, 2, 4, 8, 3, 9, 27]
      Building an object from a list
        ✓ should build {a: 97, b: 98, c: 99} from ["a", "b", "c"]
      Summing a list
        ✓ should sum the numbers
      Building a string
        ✓ should build "abc" from [97, 98, 99]
    difference
      ✓ should be say that [4,5,6] is the difference of [1,2,3,4,5,6] and [1,2,3]
    invoke
      attempting to invoke a method on a null object
        ✓ should throw a helpful error
      the invocation of a method without arguments
        ✓ should call the method, in the context of the object
      the invocation of a method with an argument
        ✓ should be called in the context of that object
      the invocation of a method with several arguments
        ✓ should be called in the context of that object
      attempting to call a non-existent method
        ✓ shoud throw a helpful error
    invokeWith
      attempting to invoke a method on a null object
        ✓ should throw a helpful error
      the invocation of a method without arguments
        ✓ should call the method, in the context of the object
        ✓ should be identical to the equivalent function constructed with "invoke"
      invoking a method with an explicit this binding
        ✓ should call our method on the correct binding of this
      the invocation of a method with arguments
        ✓ should be called in the context of that object
      the invocation of a method with several arguments
        ✓ should be called in the context of that object
      attempting to call a non-existent method
        ✓ shoud throw a helpful error

  Model
    new
      ✓ returns a Model
      ✓ should have classes
    attempting to load bad data
      ✓ should throw some kind of error
    #getAncestorsOf
      attempting to get the ancestry of a non-class
        ✓ should throw a helpful error
      getting the ancestry of a non IMO
        ✓ should find the correct ancestry
    #findSharedAncestor
      The shared ancestor of a class and null
        ✓ should not exist
      The shared ancestor of a class and a simple object
        ✓ should not exist
      The shared ancestor of a class and itself
        ✓ should be non-null
        ✓ should be itself
      The shared ancestor of a class and one of its ancestors
        ✓ is the ancestor
      The shared ancestor of a class and one of its sub-classes
        ✓ is the class
      The shared ancestor of cousins
        ✓ is the closest common ancestor
    #getSubclassesOf
      attempting to get subclasses of a non-class
        ✓ should throw a helpful error
      the subclasses of Manager
        ✓ should include "CEO"
      the subclasses of HasAddress
        ✓ should include "CEO"
        ✓ should include "Company"
      the subclasses of Employable
        ✓ should include "CEO"
        ✓ should include "Contractor"
        ✓ should not include "Address"
      Things
        ✓ should include all the things that are things
    #findCommonType
      ✓ should determine that the common class of a class is itself
      ✓ should say the common class of two examples of the same class is that class
      ✓ should say the common type of a class and its super-type is the super-type
      ✓ should say the common type of a class and one of its sub-types is the super-type
      ✓ should return a non-existent value for incompatible classes
      ✓ should return the mutual super class of compatible classes
      ✓ should handle more than two classes
      ✓ should determine that the set of all things are things
    #getPathInfo
      ✓ should be able to make a path
    NUMERIC_TYPES
      ✓ should include whole number types
      ✓ should include fractional types

  Table
    ✓ should stringify correctly
    ✓ should know about its parents
    ✓ should support the getDisplayName method

  Table with live model
    getDisplayName
      ✓ should support the getDisplayName method
      ✓ should return a display name

  Query
    new
      ✓ should make a new query
      ✓ should set the root based on the "root" option
      ✓ should set the root based on the "from" option
    handles intermine options
      ✓ can interpret views
      ✓ can derive root
      ✓ can interpret constraints
    handles sqlish options
      ✓ can interpret views
      ✓ can derive root
      ✓ can interpret constraints
    Query syntaxes
      ✓ should be synonymous
    toJSON
      ✓ should be what we think
      ✓ should produce unconnected objects
      ✓ should clone the values in multi-value constraints
      ✓ should produce objects suitable as query arguments
      ✓ should then stringify correctly
    addToSelect(path)
      ✓ should add views to the select list
    removeFromSelect(path)
      ✓ should remove views to the select list
    #addToSelect(path)
      ✓ should throw errors if there are duplicate views
      ✓ should throw errors if the addenda contain duplicates
      ✓ should not have added more views
    #clone()
      ✓ should produce unconnected clones
      ✓ cloning should not include events by default
    #off
      ✓ should have fired three events in total
    #once
      ✓ should have fired once in total

  Query
    expandStar
      #select(['*'])
        1) "before each" hook for "should expand stars to the summary fields"

  Defining Query constraints
    using the internal verbose format
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints
    using headless paths
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints
    using array encoding
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints
    using operator aliases
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints
    using an mapping
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints
    using a null value
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints
    including switched off constraints
      ✓ should work using the constraints key
      ✓ should work using the where key
      ✓ should be able to add them one by one using #addConstraint
      ✓ should be able to add them all at once using #addConstraints

  Query
    #isConstrained
      2) "before all" hook for "should say that "Employee.age" is constrained"

  PathInfo
    Illegal paths
      ✓ should be detected upon creation
    root
      ✓ should stringify with toString()
      ✓ should stringify with toPathString()
      ✓ should stringify with string concatenation
      #getType()
        ✓ should report an appropriate type
      #containsCollection()
        ✓ should not contain a collection
      #getParent()
        ✓ should throw an error
      #append(field)
        ✓ should return a new child path
        ✓ should throw if the field doesn't exist
      #getChildNodes()
        ✓ should find 10 child nodes
        ✓ should find Employee.department
        ✓ should produce nodes that can find their parent
      #isRoot()
        ✓ should return true
      #isAttribute()
        ✓ should return false
      #isReference
        ✓ should return false
      #isCollection
        ✓ should return false
      #isClass
        ✓ should return true
      #isa(type)
        ✓ should say it is an Employee
        ✓ should say it is a Thing
        ✓ should not say it is a Department
        ✓ should not say it is an int
    Simple attribute
      ✓ should stringify with toString()
      ✓ should stringify with toPathString()
      ✓ should stringify with string concatenation
      #getType()
        ✓ should report an appropriate type
      #getDisplayName
        promise API
          3) "before all" hook for "should be a nice human readable string"
        callback api
          4) should yield the name
      #containsCollection()
        ✓ should not contain a collection
      #getParent()
        ✓ should have a parent of the right type
      #append(field)
        ✓ should throw an error
      #isRoot()
        ✓ should return false
      #isAttribute()
        ✓ should return true
      #isReference
        ✓ should return false
      #isCollection
        ✓ should return false
      #isClass
        ✓ should return false
      #isa(type)
        ✓ should not say it is an Employee
        ✓ should not say it is a Thing
        ✓ should not say it is a Department
        ✓ should say it is an int
    Simple reference
      ✓ should stringify with toString()
      ✓ should stringify with toPathString()
      ✓ should stringify with string concatenation
      #getType()
        ✓ should report an appropriate type
      #containsCollection()
        ✓ should not contain a collection
      #getParent()
        ✓ should have a parent of the right type
      #append(field)
        ✓ should return the appropriate child path
        ✓ should throw if the field doesn't exist
      #isRoot()
        ✓ should return false
      #isAttribute()
        ✓ should return false
      #isReference
        ✓ should return true
      #isCollection
        ✓ should return false
      #isClass
        ✓ should return true
      #isa(type)
        ✓ should not say it is an Employee
        ✓ should say it is a Thing
        ✓ should not say it is a Department
        ✓ should not say it is an int
    Simple collection
      ✓ should stringify with toString()
      ✓ should stringify with toPathString()
      ✓ should stringify with string concatenation
      #getType()
        ✓ should report an appropriate type
      #containsCollection()
        ✓ should contain a collection
      #getParent()
        ✓ should have a parent of the right type
      #append(field)
        ✓ should return the appropriate child path
        ✓ should throw if the field doesn't exist
      #isRoot()
        ✓ should return false
      #isAttribute()
        ✓ should return false
      #isReference
        ✓ should return true
      #isCollection
        ✓ should return true
      #isClass
        ✓ should return true
      #isa(type)
        ✓ should say it is an Employee
        ✓ should say it is a Thing
        ✓ should not say it is a Department
        ✓ should not say it is an int
    Subclassed path
      #getType()
        ✓ should report the subclass
      #containsCollection()
        ✓ should contain a collection
      #getParent()
        ✓ should have a parent of the right type
      #append(field)
        ✓ should return the appropriate child path
        ✓ should throw if the field doesn't exist
      #isRoot()
        ✓ should return false
      #isAttribute()
        ✓ should return false
      #isReference
        ✓ should return true
      #isCollection
        ✓ should return true
      #isClass
        ✓ should return true
      #isa(type)
        ✓ should say it is an Employee
        ✓ should say it is a Thing
        ✓ should not say it is a Department
        ✓ should not say it is an int
    Long reference chain
      ✓ should stringify with toString()
      ✓ should stringify with toPathString()
      ✓ should stringify with string concatenation
      #getType()
        ✓ should report an appropriate type
      #containsCollection()
        ✓ should not contain a collection
      #getParent()
        ✓ should have a parent of the right type
      #append(field)
        ✓ should return the appropriate child path
        ✓ should throw if the field doesn't exist
      #isRoot()
        ✓ should return false
      #isAttribute()
        ✓ should return false
      #isReference
        ✓ should return true
      #isCollection
        ✓ should return false
      #isClass
        ✓ should return true
      #isa(type)
        ✓ should not say it is an Employee
        ✓ should say it is a Thing
        ✓ should not say it is a Department
        ✓ should not say it is an int
    A path with a custom name
      #getDisplayName
        ✓ should promise to return the name we gave it
    Long reference with collection chain
      ✓ should stringify with toString()
      ✓ should stringify with toPathString()
      ✓ should stringify with string concatenation
      #getType()
        ✓ should report an appropriate type
      #containsCollection()
        ✓ should contain a collection
      #getParent()
        ✓ should have a parent of the right type
      #append(field)
        ✓ should return the appropriate child path
        ✓ should throw if the field doesn't exist
      #isRoot()
        ✓ should return false
      #isAttribute()
        ✓ should return false
      #isReference
        ✓ should return true
      #isCollection
        ✓ should return false
      #isClass
        ✓ should return true
      #isa(type)
        ✓ should not say it is an Employee
        ✓ should say it is a Thing
        ✓ should not say it is a Department
        ✓ should not say it is an int

  Two similar paths
    ✓ should equal each other

  The path of a poor person
    ✓ should say this person is poor

  The path of a simple object
    ✓ should say that this path is not an IMO
    ✓ should say that this path is a JLO

  PathInfo::isReverseReference
    ✓ should say that Employee is not a reverse reference
    ✓ should say that Employee.department.company is not a reverse reference
    ✓ should say that Employee.department.name is not a reverse reference
    ✓ should say that Employee.department.employees.address is not a reverse reference
    ✓ should say that Employee.department.employees is a reverse reference
    ✓ should say that Employee.department.company.departments is a reverse reference
    ✓ should say that Company.departments.company is a reverse reference

  Query
    one of constraints
      count
        5) "before all" hook for "should find 36 rows"
      results
        6) "before all" hook for "should only find employees in sales and accounting"

  Query#clone
    7) "before all" hook for "should have several views in q"

  Query#clone sortOrder
    8) "before all" hook for "should exist on both"

  Query#selectPreservingImpliedConstraints
    9) "before all" hook for "should have the view we asked for"

  Query#makeListQuery
    10) "before all" hook for "should leave us with more constraints"

  Query.fromXML
    attempting to parse nonsense
      ✓ should raise an error
    attempting to parse things that cause xmldom#40
      ✓ should raise an error, and not enter an infinite loop
    attempting to parse non-strings
      ✓ should raise an error
    attempting to parse an empty string
      ✓ should raise an error
    attempting to parse a blank string
      ✓ should raise an error
    the result of parsing sensible input
      ✓ should have two elements in the view
      ✓ should have the right sort-order
      ✓ should have a sub-class constraint
      ✓ should have the expected attribute constraint
      ✓ should have a constraint with the expected values
      ✓ should have three constraints
      using this to instantiate a query
        ✓ should construct a query with the right sort-order

  Query
    lookup constraints with extra values
      ✓ should serialize correctly

  Equality
    Case insensitivity
      11) "before all" hook for "should find something"
    Case sensitivity
      12) "before all" hook for "should find something"

  parse failure
    Attempt to fetch the Model
      ✓ should fail (950ms)
      ✓ should provide a reasonable message

  not available failure
    Attempt to fetch the Model
      ✓ should fail
      ✓ should provide a reasonable message

  Query
    #fetchCode
      13) "before all" hook for "should return some code"
    #fetchCode(long-uri)
      14) "before all" hook for "should return some code"

  Service
    #count()
      ✓ should fail

  Service
    #fetchWidgets
      15) "before all" hook for "gets a list of the available widgets"

  Query
    #enrichment
      16) "before all" hook for "performs an enrichment calculation"

  lookup
    Looking for David
      using the promises API
        17) "before all" hook for "should find someone with the right name"
      using the call-back API
        18) should find someone with the right name and age.
        19) should find someone with the right name and age.

  find
    Looking for David
      using the promises API
        20) "before all" hook for "should find someone with the right name"
      using the call-back API
        21) should find someone with the right name and age.
        22) should find someone with the right name and age.

  Service#findById
    Looking for David
      using the promises API
        23) "before all" hook for "should find someone with the right name"
      specific fields
        24) "before all" hook for "should find someone with the right name"
      using the call-back API
        25) "before all" hook for "should find someone with the right name and age."
    Looking for B1
      26) "before all" hook for "should find someone with the right name"

  Query
    #getOuterJoin(path)
      27) "before all" hook for "should find the outer join of department"

  IdResults
    ✓ should have several matches
    ✓ should have fewer good matches
    ✓ should have some duplicates
    ✓ should have some others
    ✓ should have some type_converteds

  Service
    current
      #resolveIds()
        ✓ should fail
      #resolutionJob(id)
        28) "before all" hook for "should produce a job"
      #resolveIds(job)
        29) "before all" hook for "should produce a job"
      #resolveIds(convertedTypes)
        30) "before all" hook for "should produce a job"
      #resolveIds(caseSensitiveJob)
        31) "before all" hook for "should produce a job"

  Relevance of joins
    a query with irrelevant joins
      32) "before all" hook for "should not include the irrelvant join in the output XML"
    a query with relevant joins
      33) "before all" hook for "should not include the irrelvant join in the output XML"

  Service
    #complement()
      ✓ should fail
    #complement(opts)
      34) "before all" hook for "should have succeeded"
    #complement(opts) {Array of list names}
      35) "before all" hook for "should have succeeded"
    #complement(opts) {Array of Lists}
      36) "before all" hook for "should have succeeded"
    #complement(opts, cb)
      37) should support the callback API

  List
    #copy()
      38) "before all" hook for "should produce a copy"
    #copy({tags})
      39) "before all" hook for "should produce a copy"
    #copy({name, tags})
      40) "before all" hook for "should produce a copy"
    #copy(name)
      41) "before all" hook for "should produce a copy"
    #copy(name, cb)
      42) should make a list with the right name and size
    #copy({name, tags}, cb)
      43) should make a list with the right name and size
    #copy(cb)
      44) should make a list with the right name and size

  List Operations
    a list created by intersect
      using the promise api
        45) "before all" hook for "should have 2 members"
      using the callback api
        46) should have the right size, name, and all the tags we specified
    a list created by union
      using the promise api
        47) "before all" hook for "should have 6 members"
      using the callback api
        48) should have the right size, name, and all the tags we specified
    a list created by merge
      using the promise api
        49) "before all" hook for "should have 6 members"
      using the callback api
        50) should have the right size, name, and all the tags we specified
    a list created by diff
      using the promise api
        51) "before all" hook for "should have 4 members"
      using the callback api
        52) should have the right size, name, and all the tags we specified

  List
    #rename(name)
      53) "before all" hook for "should exist"
    #rename(name, cb)
      54) should support the callback API

  List
    #fetchTags()
      55) "before all" hook for "should start by finding no tags"
    #addTags(tags)
      56) "before all" hook for "should yield three tags"
    #fetchTags() following update
      57) "before all" hook for "should yield three tags"
    #removeTags(tags)
      58) "before all" hook for "should yield three tags"

  Service
    #createList()
      ✓ should fail
    #createList(opts, ids)
      59) "before all" hook for "should have succeeded"
    #createList(opts-id-array, ids)
      60) "before all" hook for "should have succeeded"

  Service#fetchListsContaining
    searching for public ids
      61) "before all" hook for "should find the right number of lists"
    searching with the callback api
      62) should still work
    searching for internal ids
      63) "before all" hook for "should find the right number of lists"

  Service
    #fetchLists()
      64) "before all" hook for "should find at least one list"
    #fetchLists (err, list) ->
      65) should find "My-Favourite-Employees"
    #findLists name
      66) "before all" hook for "should find one list"
    #findLists name, (err, lists) ->
      67) should find the right list
    #fetchList()
      68) "before all" hook for "should find that list"
    #fetchList (err, list) ->
      69) should find "My-Favourite-Employees"

  Query
    summary of a path with nulls
      70) "before each" hook for "should find lots of nulls"
    Now restricting to nulls with multi-value
      71) "before each" hook for "should find lots of nulls"
    Now restricting to non-nulls with multi-value constraints
      72) "before each" hook for "should not find any nulls"

  Query
    #next
      73) "before all" hook for "gets the query to retrieve the next page of results"
    #previous
      74) "before all" hook for "gets the query to retrieve the previous page of results"

  Service
    #pathValues()
      ✓ should fail
    #values()
      ✓ should fail
    #pathValues("Foo.bar")
      ✓ should fail
    #pathValues("Company.name")
      75) "before all" hook for "should get a list of seven values"
    #pathValues("Company.name", cb)
      76) should find WH in amongst the 7 companies
    #pathValues(Path("Company.name"))
      77) "before all" hook for "should get a list of seven values"
    #pathValues("Department.employees.name")
      78) "before all" hook for "should get a list of 132 values"
    #pathValues("Department.employees.name")
      79) "before all" hook for "should get a list of 132 values"
    #pathValues("Department.employees.name", {"Department.employees": "CEO"})
      80) "before all" hook for "should get a list of six values"
    #pathValues("Department.employees.name", {"Department.employees": "CEO"}, cb)
      81) should find 6 CEOs, including Charles Miner
    #pathValues(Path("Department.employees.name", {"Department.employees": "CEO"}))
      82) "before all" hook for "should get a list of six values"
    #values("Department.employees.name", {"Department.employees": "CEO"})
      83) "before all" hook for "should get a list of six values"
    #values(Path("Department.employees.name", {"Department.employees": "CEO"}))
      84) "before all" hook for "should get a list of six values"

  Query
    qids
      Getting an id
        85) "before all" hook for "should yield an id"
      Getting an id for the same query twice, same object
        86) "before all" hook for "should have fetched the same id twice"
      Getting an id for the same query twice, different objects
        87) "before all" hook for "should have fetched the same id twice"
      Getting an id for a different query should result in a different id
        88) "before all" hook for "should have fetched two different ids"

  Query#addConstraint
    one existing constraint
      ✓ should be able to add constraints with "or"
      ✓ should set the logic to use "or"
    multiple existing constraints
      ✓ should be able to add constraints with "or"
      ✓ should set the logic to use "or"

  Control query for escaped chars
    89) "before all" hook for "should find some employees"

  Querying for escaped values
    90) "before all" hook for "should find some employees"

  Query#on
    when events are triggered
      ✓ should notify generally interested handlers
      ✓ should also notify handlers with more specific interests

  Query#on
    when events are emitted
      ✓ should respond to events

  Query#bind
    when events are emitted
      ✓ should respond to events

  Query#off
    when events are emitted
      ✓ should respond to events

  Query#off
    when events are emitted
      ✓ should respond to events

  Query#unbind
    when events are emitted
      ✓ should respond to events

  Query#isRelevant
    91) "before all" hook for "should find Employee.address relevant"

  Query#getPossiblePaths
    The possible paths of a query rooted at Company, default depth
      ✓ should find some paths
      ✓ should be an array of PathInfo
      ✓ should include Company.department.employees.name
      ✓ should include a reverse reference
      ✓ should include Company.oldContracts.companys.address
      ✓ should not include very deep paths
    restricting paths to ortho-references
      ✓ should find some paths
      ✓ should include Company.department.employees.name
      ✓ should include Company.department.employees.address
      ✓ should not include a reverse reference
      ✓ a path it returns (Company) should not be a reverse reference
      ✓ a path it returns (Company.name) should not be a reverse reference
      ✓ a path it returns (Company.vatNumber) should not be a reverse reference
      ✓ a path it returns (Company.id) should not be a reverse reference
      ✓ a path it returns (Company.CEO) should not be a reverse reference
      ✓ a path it returns (Company.CEO.salary) should not be a reverse reference
      ✓ a path it returns (Company.CEO.title) should not be a reverse reference
      ✓ a path it returns (Company.CEO.fullTime) should not be a reverse reference
      ✓ a path it returns (Company.CEO.age) should not be a reverse reference
      ✓ a path it returns (Company.CEO.end) should not be a reverse reference
      ✓ a path it returns (Company.CEO.name) should not be a reverse reference
      ✓ a path it returns (Company.CEO.id) should not be a reverse reference
      ✓ a path it returns (Company.CEO.seniority) should not be a reverse reference
      ✓ a path it returns (Company.CEO.department) should not be a reverse reference
      ✓ a path it returns (Company.CEO.department.name) should not be a reverse reference
      ✓ a path it returns (Company.CEO.department.id) should not be a reverse reference
      ✓ a path it returns (Company.CEO.department.company) should not be a reverse reference
      ✓ a path it returns (Company.CEO.department.manager) should not be a reverse reference
      ✓ a path it returns (Company.CEO.department.rejectedEmployee) should not be a reverse reference
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe) should not be a reverse reference
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.name) should not be a reverse reference
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.id) should not be a reverse reference
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.company) should not be a reverse reference
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.manager) should not be a reverse reference
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.employees) should not be a reverse reference
      ✓ a path it returns (Company.CEO.employmentPeriod) should not be a reverse reference
      ✓ a path it returns (Company.CEO.employmentPeriod.start) should not be a reverse reference
      ✓ a path it returns (Company.CEO.employmentPeriod.end) should not be a reverse reference
      ✓ a path it returns (Company.CEO.employmentPeriod.id) should not be a reverse reference
      ✓ a path it returns (Company.CEO.address) should not be a reverse reference
      ✓ a path it returns (Company.CEO.address.address) should not be a reverse reference
      ✓ a path it returns (Company.CEO.address.id) should not be a reverse reference
      ✓ a path it returns (Company.CEO.simpleObjects) should not be a reverse reference
      ✓ a path it returns (Company.CEO.simpleObjects.name) should not be a reverse reference
      ✓ a path it returns (Company.CEO.secretarys) should not be a reverse reference
      ✓ a path it returns (Company.CEO.secretarys.name) should not be a reverse reference
      ✓ a path it returns (Company.CEO.secretarys.id) should not be a reverse reference
      ✓ a path it returns (Company.bank) should not be a reverse reference
      ✓ a path it returns (Company.bank.name) should not be a reverse reference
      ✓ a path it returns (Company.bank.id) should not be a reverse reference
      ✓ a path it returns (Company.bank.debtors) should not be a reverse reference
      ✓ a path it returns (Company.bank.debtors.debt) should not be a reverse reference
      ✓ a path it returns (Company.bank.debtors.interestRate) should not be a reverse reference
      ✓ a path it returns (Company.bank.debtors.id) should not be a reverse reference
      ✓ a path it returns (Company.bank.debtors.owedBy) should not be a reverse reference
      ✓ a path it returns (Company.address) should not be a reverse reference
      ✓ a path it returns (Company.address.address) should not be a reverse reference
      ✓ a path it returns (Company.address.id) should not be a reverse reference
      ✓ a path it returns (Company.departments) should not be a reverse reference
      ✓ a path it returns (Company.departments.name) should not be a reverse reference
      ✓ a path it returns (Company.departments.id) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.title) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.fullTime) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.age) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.end) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.name) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.id) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.seniority) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.department) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.departmentThatRejectedMe) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.employmentPeriod) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.address) should not be a reverse reference
      ✓ a path it returns (Company.departments.manager.simpleObjects) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.fullTime) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.age) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.end) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.name) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.id) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.departmentThatRejectedMe) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.employmentPeriod) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.address) should not be a reverse reference
      ✓ a path it returns (Company.departments.employees.simpleObjects) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.fullTime) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.age) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.end) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.name) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.id) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.department) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.employmentPeriod) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.address) should not be a reverse reference
      ✓ a path it returns (Company.departments.rejectedEmployee.simpleObjects) should not be a reverse reference
      ✓ a path it returns (Company.contractors) should not be a reverse reference
      ✓ a path it returns (Company.contractors.name) should not be a reverse reference
      ✓ a path it returns (Company.contractors.id) should not be a reverse reference
      ✓ a path it returns (Company.contractors.seniority) should not be a reverse reference
      ✓ a path it returns (Company.contractors.personalAddress) should not be a reverse reference
      ✓ a path it returns (Company.contractors.personalAddress.address) should not be a reverse reference
      ✓ a path it returns (Company.contractors.personalAddress.id) should not be a reverse reference
      ✓ a path it returns (Company.contractors.businessAddress) should not be a reverse reference
      ✓ a path it returns (Company.contractors.businessAddress.address) should not be a reverse reference
      ✓ a path it returns (Company.contractors.businessAddress.id) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.name) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.vatNumber) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.id) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.CEO) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.bank) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.address) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.departments) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.contractors) should not be a reverse reference
      ✓ a path it returns (Company.contractors.oldComs.secretarys) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.name) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.id) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.seniority) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.personalAddress) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.personalAddress.address) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.personalAddress.id) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.businessAddress) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.businessAddress.address) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.businessAddress.id) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.name) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.vatNumber) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.id) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.CEO) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.bank) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.address) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.departments) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.oldContracts) should not be a reverse reference
      ✓ a path it returns (Company.oldContracts.companys.secretarys) should not be a reverse reference
      ✓ a path it returns (Company.secretarys) should not be a reverse reference
      ✓ a path it returns (Company.secretarys.name) should not be a reverse reference
      ✓ a path it returns (Company.secretarys.id) should not be a reverse reference
    using predicates - strings
      ✓ should return some paths
      ✓ should include Company.name
      ✓ should not include Company.name
      ✓ should include Company.department.employees.name
      ✓ should not include Company.department.employees.address
      ✓ a path it returns (Company.name) should be an attribute
      ✓ a path it returns (Company.vatNumber) should be an attribute
      ✓ a path it returns (Company.id) should be an attribute
      ✓ a path it returns (Company.CEO.salary) should be an attribute
      ✓ a path it returns (Company.CEO.title) should be an attribute
      ✓ a path it returns (Company.CEO.fullTime) should be an attribute
      ✓ a path it returns (Company.CEO.age) should be an attribute
      ✓ a path it returns (Company.CEO.end) should be an attribute
      ✓ a path it returns (Company.CEO.name) should be an attribute
      ✓ a path it returns (Company.CEO.id) should be an attribute
      ✓ a path it returns (Company.CEO.seniority) should be an attribute
      ✓ a path it returns (Company.CEO.department.name) should be an attribute
      ✓ a path it returns (Company.CEO.department.id) should be an attribute
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.name) should be an attribute
      ✓ a path it returns (Company.CEO.departmentThatRejectedMe.id) should be an attribute
      ✓ a path it returns (Company.CEO.employmentPeriod.start) should be an attribute
      ✓ a path it returns (Company.CEO.employmentPeriod.end) should be an attribute
      ✓ a path it returns (Company.CEO.employmentPeriod.id) should be an attribute
      ✓ a path it returns (Company.CEO.address.address) should be an attribute
      ✓ a path it returns (Company.CEO.address.id) should be an attribute
      ✓ a path it returns (Company.CEO.simpleObjects.name) should be an attribute
      ✓ a path it returns (Company.CEO.secretarys.name) should be an attribute
      ✓ a path it returns (Company.CEO.secretarys.id) should be an attribute
      ✓ a path it returns (Company.bank.name) should be an attribute
      ✓ a path it returns (Company.bank.id) should be an attribute
      ✓ a path it returns (Company.bank.debtors.debt) should be an attribute
      ✓ a path it returns (Company.bank.debtors.interestRate) should be an attribute
      ✓ a path it returns (Company.bank.debtors.id) should be an attribute
      ✓ a path it returns (Company.address.address) should be an attribute
      ✓ a path it returns (Company.address.id) should be an attribute
      ✓ a path it returns (Company.departments.name) should be an attribute
      ✓ a path it returns (Company.departments.id) should be an attribute
      ✓ a path it returns (Company.departments.manager.title) should be an attribute
      ✓ a path it returns (Company.departments.manager.fullTime) should be an attribute
      ✓ a path it returns (Company.departments.manager.age) should be an attribute
      ✓ a path it returns (Company.departments.manager.end) should be an attribute
      ✓ a path it returns (Company.departments.manager.name) should be an attribute
      ✓ a path it returns (Company.departments.manager.id) should be an attribute
      ✓ a path it returns (Company.departments.manager.seniority) should be an attribute
      ✓ a path it returns (Company.departments.employees.fullTime) should be an attribute
      ✓ a path it returns (Company.departments.employees.age) should be an attribute
      ✓ a path it returns (Company.departments.employees.end) should be an attribute
      ✓ a path it returns (Company.departments.employees.name) should be an attribute
      ✓ a path it returns (Company.departments.employees.id) should be an attribute
      ✓ a path it returns (Company.departments.rejectedEmployee.fullTime) should be an attribute
      ✓ a path it returns (Company.departments.rejectedEmployee.age) should be an attribute
      ✓ a path it returns (Company.departments.rejectedEmployee.end) should be an attribute
      ✓ a path it returns (Company.departments.rejectedEmployee.name) should be an attribute
      ✓ a path it returns (Company.departments.rejectedEmployee.id) should be an attribute
      ✓ a path it returns (Company.contractors.name) should be an attribute
      ✓ a path it returns (Company.contractors.id) should be an attribute
      ✓ a path it returns (Company.contractors.seniority) should be an attribute
      ✓ a path it returns (Company.contractors.personalAddress.address) should be an attribute
      ✓ a path it returns (Company.contractors.personalAddress.id) should be an attribute
      ✓ a path it returns (Company.contractors.businessAddress.address) should be an attribute
      ✓ a path it returns (Company.contractors.businessAddress.id) should be an attribute
      ✓ a path it returns (Company.contractors.oldComs.name) should be an attribute
      ✓ a path it returns (Company.contractors.oldComs.vatNumber) should be an attribute
      ✓ a path it returns (Company.contractors.oldComs.id) should be an attribute
      ✓ a path it returns (Company.oldContracts.name) should be an attribute
      ✓ a path it returns (Company.oldContracts.id) should be an attribute
      ✓ a path it returns (Company.oldContracts.seniority) should be an attribute
      ✓ a path it returns (Company.oldContracts.personalAddress.address) should be an attribute
      ✓ a path it returns (Company.oldContracts.personalAddress.id) should be an attribute
      ✓ a path it returns (Company.oldContracts.businessAddress.address) should be an attribute
      ✓ a path it returns (Company.oldContracts.businessAddress.id) should be an attribute
      ✓ a path it returns (Company.oldContracts.companys.name) should be an attribute
      ✓ a path it returns (Company.oldContracts.companys.vatNumber) should be an attribute
      ✓ a path it returns (Company.oldContracts.companys.id) should be an attribute
      ✓ a path it returns (Company.secretarys.name) should be an attribute
      ✓ a path it returns (Company.secretarys.id) should be an attribute
    using predicates - functions
      ✓ should return some paths
      ✓ should include Company.vatNumber
      ✓ should not include Company.name
      ✓ should include Company.departments.employees
    The possible paths of a query rooted at Company, extra deep
      ✓ should include very deep paths
      ✓ should not include silly paths

  Query#canHaveMultipleValues
    A path that cannot have multiple values
      ✓ should not be able to have multiple values
    A path that can have multiple values
      ✓ should be able to have multiple values

  Query#getQueryNodes
    The nodes of a query
      ✓ should be an array
      ✓ should be an array of PathInfo instances
      ✓ should not include any attributes
      ✓ should include the nodes in the view
      ✓ should include the nodes in the constraints
      ✓ should not include nodes not in the query

  Query#isOuterJoin
    An outer-joined path
      ✓ should be considered to be outer joined
    A non-outer joined path
      ✓ should not be considered to be outer joined
    attempting to get information about a nonsense path
      ✓ should throw an error
      ✓ should however return false

  Query#getSortDirection
    direction of "age"
      ✓ should be "DESC"
    direction of "name"
      ✓ should be "ASC"
    direction of "age", short path
      ✓ should be "DESC"
    direction of "name", short path
      ✓ should be "ASC"
    the direction of "address.address"
      ✓ should not exist
    Attempting to get the direction of nonsense
      ✓ should throw a helpful error
    Attempting to get the direction of irrelevant path
      ✓ should throw a helpful error

  Query#addOrSetSortOrder
    change direction of "age"
      ✓ should have toggled the sort order
    change direction of "name"
      ✓ should have toggled the sort order
    add direction for address.address
      ✓ should have set the sort order

  Query#setJoinStyle
    setting the default join style
      ✓ should now be an outer join
    attempting to add an invalid join style
      ✓ should throw a helpful error message

  Query#saveAsList
    saving older employees
      92) "before all" hook for "should exist"
    saving younger employees
      93) "before all" hook for "should exist"

  Query#select
    ✓ should initially have the right sort order
    ✓ should update the sort order when changing the select list
    ✓ should also update the sort order when changing the select list when cloned

  Query#orderBy events
    ✓ should be able to silence sort events

  Query#orderBy silently
    ✓ should be able to silence sort events

  Query#select
    ✓ should have a type constraint on the department manager
    ✓ means that we can resolve paths correctly
    ✓ agrees that department.managers are in the query
    ✓ agrees that department.managers are not relevant
    ✓ emits the type constraints in XML
    ✓ doesn't stop working when we make the constraint irrelevant
    ✓ doesn't emit irrelevant type constraints in XML
    ✓ should emit the type constraint again once it becomes relevant

  Control query for unicode
    94) "before all" hook for "should find some employees"

  Querying for unicode values
    95) "before all" hook for "should find some employees"

  Query
    #values
      96) "before all" hook for "should retrieve a list of ages"

  Service
    #values
      for queries
        97) "before all" hook for "should retrieve a list of ages"
      for queries with callbacks
        98) "before all" hook for "should retrieve a list of ages"
      for query parameters
        99) "before all" hook for "should retrieve a list of ages"
      for query parameters with callbacks
        100) "before all" hook for "should retrieve a list of ages"
      for string paths
        101) "before all" hook for "should find all the companies"
      for object paths
        102) "before all" hook for "should find all the companies"

  Query
    with-subclasses
      running a subclass query
        103) "before all" hook for "should find six ceos who work in departments"
      running a multi-type query
        104) "before all" hook for "ceos + contractors should = union"

  Service#search
    using the promise API
      to look for everything
        105) "before all" hook for "should find at least 100 things"
      to look for David
        106) "before all" hook for "should find david and his department"
      to look for HR
        107) "before all" hook for "should find 19 HR results when unconstrained"
      to limit result count
        108) "before all" hook for "should paginate results"
      to return correct subset
        109) "before all" hook for "should return the requested number of results"
      to look for David, with a request object
        110) "before all" hook for "should find david and his department"
      searcing by a specific type
        111) "before all" hook for "should find david's department"
    using the callback API
      to look for everything
        112) should find at least 100 things, and some banks
      to look for David
        113) should find david and his department
      searching by a specific type
        114) should find david's department, and no managers

  Service
    #records
      115) "before all" hook for "promises to return a list of employee records"
    bad requests to #records
      ✓ should fail
    #records with callbacks
      good requests
        116) yields a list of employee records
      bad requests
        117) yields errors in as the first parameter to the callback

  Query
    #records
      118) "before all" hook for "promises to return a list of employee records"
    #records with callbacks
      119) yields a list of employees

  Service#register
    registering a new user
      120) "before all" hook for "should create a user"

  Registry
    new Registry
      ✓ should make a new registry adapter
      getFormat
        ✓ should return format of query and default back to json
      makePath
        ✓ should return complete path, assembling root url and query parameters
      isEmpty
        ✓ should return true if an object is empty and has Object as prototype, false if not
      fetchMines
        ✓ should reject all values except dev, prod or all in type of mine
        ✓ should fetch all mines given nothing in the query parameter (1657ms)

  Query
    #removeConstraint(con)
      121) "before each" hook for "should be able to remove a constraint"

  Query
    #rows()
      122) should return 46 rows, with a sum of 2688
      123) should return 46 rows, with a sum of 2688, and work with callbacks
    #eachRow
      124) should allow iteration per item
      125) should allow iteration per item with a single callback
      126) should allow iteration with promises

  Service
    #rows()
      good requests
        127) accepts a query options object, and can run it as it would a query
        128) accepts a query options object, and can run it, accepting callbacks
      very short timeouts
        ✓ should fail
      reasonable timeouts
        129) should succeed and get results
      bad requests
        ✓ should return a failed promise
        130) should yield an error as the first parameter to the callback
    #eachRow()
      good requests
        131) can run a query and yield each row
        132) can run a query and yield each row, and does not need a page
        133) accepts a query options object and can run it as a query, callbacks
        134) accepts a query options object and can run it as a query, callbacks, no page
        135) accepts a query options object and can run it as it would a query, callback
        136) accepts a query options object and can run it as it would a query, promise
      bad requests
        ✓ should return a failed promise
        137) should report the status code of a bad query
        138) should trigger the error handler provided

  Static service properties:
    the version
      ✓ should return a usable value
      139) should resolve successfully
      140) should yield a positive value
      141) should support callbacks
    the release
      ✓ should return a usable value
      142) should resolve successfully
      143) should equal "test"
      144) should support callbacks
    the classkeys
      ✓ should return a usable value
      145) should resolve successfully
      146) should have the classes property
      147) should have a keys for employee
      148) should support callbacks
    the model
      ✓ should return a usable value
      149) should resolve successfully
      150) should have the classes property
      151) should have a positive number of classes
      152) should support callbacks
    the summary fields
      ✓ should return a usable value
      153) should resolve successfully
      154) should have fields for Employee
      155) should have the expected fields for Employee
      156) should support callbacks
      157) should support callbacks

  Service
    new Service
      ✓ should make a new service
      ✓ should require at least a root property
      ✓ should not alter complete root urls
      ✓ should ensure root urls have a trailing slash
      ✓ should deal with minimal root urls
    customHeaders
      158) override an authorization header
    .connect
      ✓ should serve as an alias for "new Service"
      ✓ should check the arguments
    caching
      useCache
        159) "before each" hook for "should be true"
      flushCaches
        160) "before each" hook for "should mean we get fresh objects"

  Service#eachRecord
    Params
      161) can yield each employee, using params
      162) can yield each employee, without needing a page, using params
      163) can yield a stream of employees, using params
      164) can make use of pipes
    Query
      165) can yield each employee, all parameters
      166) can yield each employee, without needing a page
      167) can yield a stream of employees, no callbacks

  Query#eachRecord
    168) "before all" hook for "promises to return a stream over the employees"

  Query
    summary of numeric path
      169) "before each" hook for "should have fewer than 21 buckets"
    American English alias
      170) "before each" hook for "should include all the results of the query"
    summary of string path
      171) "before each" hook for "should have fewer than 21 buckets"

  Fetching templates
    172) "before all" hook for "should find some templates"

  Using templates
    173) "before all" hook for "should be just like using queries"

  TSV results
    174) "before all" hook in "TSV results"

  User#getToken
    A day token
      175) "before all" hook for "should not be the same as the permanent token"
    Permanent tokens
      create a token
        176) "before all" hook for "should have created a token"
      create a token using the callback api
        177) should be able to use the callback api
      create a couple of tokens
        178) "before all" hook for "should have created multiple tokens"
      revoke all tokens
        179) "before all" hook for "should be able to delete these tokens"
      revoke one token
        180) "before all" hook for "should have created multiple tokens, and revoked one"

  Service
    #manageUserPreferences
      promise api
        getting preferences
          181) "before each" hook for "should get an object, with no value for testpref"
        setting pref
          182) "before each" hook for "should find the prefs set correctly"
      callback api
        getting preferences
          183) should get an object, with no value for testpref
        setting pref
          184) should find the prefs set correctly

  User: single preference management
    #setPreference(key: val)
      185) "before each" hook for "should have the right prefs set"
    #setPreference(key, val)
      186) "before each" hook for "should have the right prefs set"
    #setPreference([[key, val]])
      187) "before each" hook for "should have the right prefs set"
    #clearPreference(key)
      188) "before each" hook for "should have the right prefs set"

  User: preference management with callbacks
    #clearPreference(key)
      189) "before each" hook for "should have the right prefs set"

  User: multiple preference management
    #setPreferences({a: val1, b: val2})
      190) "before each" hook for "should have both preferences set"
    #setPreferences([[a, val1], [b, val2]])
      191) "before each" hook for "should have both preferences set"

  Service
    #whoami()
      192) "before all" hook for "should yield a user"
    #whoami(cb)
      193) should support the callback API
    #fetchUser()
      194) "before all" hook for "should yield a user"


  622 passing (10m)
  194 failing

  1) Query
       expandStar
         #select(['*'])
           "before each" hook for "should expand stars to the summary fields":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  2) Query
       #isConstrained
         "before all" hook for "should say that "Employee.age" is constrained":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  3) PathInfo
       Simple attribute
         #getDisplayName
           promise API
             "before all" hook for "should be a nice human readable string":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  4) PathInfo
       Simple attribute
         #getDisplayName
           callback api
             should yield the name:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  5) Query
       one of constraints
         count
           "before all" hook for "should find 36 rows":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  6) Query
       one of constraints
         results
           "before all" hook for "should only find employees in sales and accounting":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  7) Query#clone
       "before all" hook for "should have several views in q":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  8) Query#clone sortOrder
       "before all" hook for "should exist on both":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  9) Query#selectPreservingImpliedConstraints
       "before all" hook for "should have the view we asked for":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  10) Query#makeListQuery
       "before all" hook for "should leave us with more constraints":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  11) Equality
       Case insensitivity
         "before all" hook for "should find something":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  12) Equality
       Case sensitivity
         "before all" hook for "should find something":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  13) Query
       #fetchCode
         "before all" hook for "should return some code":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  14) Query
       #fetchCode(long-uri)
         "before all" hook for "should return some code":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  15) Service
       #fetchWidgets
         "before all" hook for "gets a list of the available widgets":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  16) Query
       #enrichment
         "before all" hook for "performs an enrichment calculation":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  17) lookup
       Looking for David
         using the promises API
           "before all" hook for "should find someone with the right name":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  18) lookup
       Looking for David
         using the call-back API
           should find someone with the right name and age.:
     Error: TypeError: Cannot read property '0' of undefined (and Mocha's done() called multiple times)
      at /home/laksh/Desktop/github/imjs-dep/test/compiled/find-by-id.js:39:17
      at tryCatch (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at invokeCallback (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publish (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publishRejection (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at flush (node_modules/es6-promise/dist/es6-promise.js:128:5)
      at _combinedTickCallback (internal/process/next_tick.js:131:7)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  19) lookup
       Looking for David
         using the call-back API
           should find someone with the right name and age.:
     Error: TypeError: Cannot read property '0' of undefined (and Mocha's done() called multiple times)
      at /home/laksh/Desktop/github/imjs-dep/test/compiled/find-by-id.js:39:17
      at tryCatch (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at invokeCallback (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publish (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publishRejection (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at flush (node_modules/es6-promise/dist/es6-promise.js:128:5)
      at _combinedTickCallback (internal/process/next_tick.js:131:7)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  20) find
       Looking for David
         using the promises API
           "before all" hook for "should find someone with the right name":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  21) find
       Looking for David
         using the call-back API
           should find someone with the right name and age.:
     Error: TypeError: Cannot read property 'name' of undefined (and Mocha's done() called multiple times)
      at /home/laksh/Desktop/github/imjs-dep/test/compiled/find-by-id.js:58:47
      at tryCatch (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at invokeCallback (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publish (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publishRejection (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at flush (node_modules/es6-promise/dist/es6-promise.js:128:5)
      at _combinedTickCallback (internal/process/next_tick.js:131:7)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  22) find
       Looking for David
         using the call-back API
           should find someone with the right name and age.:
     Error: TypeError: Cannot read property 'name' of undefined (and Mocha's done() called multiple times)
      at /home/laksh/Desktop/github/imjs-dep/test/compiled/find-by-id.js:58:47
      at tryCatch (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at invokeCallback (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publish (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publishRejection (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at flush (node_modules/es6-promise/dist/es6-promise.js:128:5)
      at _combinedTickCallback (internal/process/next_tick.js:131:7)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  23) Service#findById
       Looking for David
         using the promises API
           "before all" hook for "should find someone with the right name":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  24) Service#findById
       Looking for David
         specific fields
           "before all" hook for "should find someone with the right name":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  25) Service#findById
       Looking for David
         using the call-back API
           "before all" hook for "should find someone with the right name and age.":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  26) Service#findById
       Looking for B1
         "before all" hook for "should find someone with the right name":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  27) Query
       #getOuterJoin(path)
         "before all" hook for "should find the outer join of department":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  28) Service
       current
         #resolutionJob(id)
           "before all" hook for "should produce a job":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  29) Service
       current
         #resolveIds(job)
           "before all" hook for "should produce a job":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  30) Service
       current
         #resolveIds(convertedTypes)
           "before all" hook for "should produce a job":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  31) Service
       current
         #resolveIds(caseSensitiveJob)
           "before all" hook for "should produce a job":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  32) Relevance of joins
       a query with irrelevant joins
         "before all" hook for "should not include the irrelvant join in the output XML":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  33) Relevance of joins
       a query with relevant joins
         "before all" hook for "should not include the irrelvant join in the output XML":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  34) Service
       #complement(opts)
         "before all" hook for "should have succeeded":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  35) Service
       #complement(opts) {Array of list names}
         "before all" hook for "should have succeeded":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  36) Service
       #complement(opts) {Array of Lists}
         "before all" hook for "should have succeeded":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  37) Service
       #complement(opts, cb)
         should support the callback API:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  38) List
       #copy()
         "before all" hook for "should produce a copy":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  39) List
       #copy({tags})
         "before all" hook for "should produce a copy":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  40) List
       #copy({name, tags})
         "before all" hook for "should produce a copy":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  41) List
       #copy(name)
         "before all" hook for "should produce a copy":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  42) List
       #copy(name, cb)
         should make a list with the right name and size:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  43) List
       #copy({name, tags}, cb)
         should make a list with the right name and size:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  44) List
       #copy(cb)
         should make a list with the right name and size:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  45) List Operations
       a list created by intersect
         using the promise api
           "before all" hook for "should have 2 members":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  46) List Operations
       a list created by intersect
         using the callback api
           should have the right size, name, and all the tags we specified:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  47) List Operations
       a list created by union
         using the promise api
           "before all" hook for "should have 6 members":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  48) List Operations
       a list created by union
         using the callback api
           should have the right size, name, and all the tags we specified:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  49) List Operations
       a list created by merge
         using the promise api
           "before all" hook for "should have 6 members":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  50) List Operations
       a list created by merge
         using the callback api
           should have the right size, name, and all the tags we specified:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  51) List Operations
       a list created by diff
         using the promise api
           "before all" hook for "should have 4 members":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  52) List Operations
       a list created by diff
         using the callback api
           should have the right size, name, and all the tags we specified:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  53) List
       #rename(name)
         "before all" hook for "should exist":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  54) List
       #rename(name, cb)
         should support the callback API:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  55) List
       #fetchTags()
         "before all" hook for "should start by finding no tags":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  56) List
       #addTags(tags)
         "before all" hook for "should yield three tags":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  57) List
       #fetchTags() following update
         "before all" hook for "should yield three tags":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  58) List
       #removeTags(tags)
         "before all" hook for "should yield three tags":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  59) Service
       #createList(opts, ids)
         "before all" hook for "should have succeeded":
     Error: Error: POST http://localhost:8080/intermine-demo/service/lists?name=temp-list-uploaded&type=Employee&description=A%20list%20created%20to%20test%20the%20list%20upload%20mechanism&tags=temp&tags=imjs&tags=test&tags=node&token=test-user-token: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  60) Service
       #createList(opts-id-array, ids)
         "before all" hook for "should have succeeded":
     Error: Error: POST http://localhost:8080/intermine-demo/service/lists?name=temp-list-uploaded&type=Employee&description=A%20list%20created%20to%20test%20the%20list%20upload%20mechanism&tags=temp&tags=imjs&tags=test&tags=node&token=test-user-token: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  61) Service#fetchListsContaining
       searching for public ids
         "before all" hook for "should find the right number of lists":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  62) Service#fetchListsContaining
       searching with the callback api
         should still work:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  63) Service#fetchListsContaining
       searching for internal ids
         "before all" hook for "should find the right number of lists":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  64) Service
       #fetchLists()
         "before all" hook for "should find at least one list":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  65) Service
       #fetchLists (err, list) ->
         should find "My-Favourite-Employees":
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/lists.js)
  

  66) Service
       #findLists name
         "before all" hook for "should find one list":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  67) Service
       #findLists name, (err, lists) ->
         should find the right list:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/lists.js)
  

  68) Service
       #fetchList()
         "before all" hook for "should find that list":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  69) Service
       #fetchList (err, list) ->
         should find "My-Favourite-Employees":
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/lists.js)
  

  70) Query
       summary of a path with nulls
         "before each" hook for "should find lots of nulls":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  71) Query
       Now restricting to nulls with multi-value
         "before each" hook for "should find lots of nulls":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  72) Query
       Now restricting to non-nulls with multi-value constraints
         "before each" hook for "should not find any nulls":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  73) Query
       #next
         "before all" hook for "gets the query to retrieve the next page of results":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  74) Query
       #previous
         "before all" hook for "gets the query to retrieve the previous page of results":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  75) Service
       #pathValues("Company.name")
         "before all" hook for "should get a list of seven values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  76) Service
       #pathValues("Company.name", cb)
         should find WH in amongst the 7 companies:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/path-values.js)
  

  77) Service
       #pathValues(Path("Company.name"))
         "before all" hook for "should get a list of seven values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  78) Service
       #pathValues("Department.employees.name")
         "before all" hook for "should get a list of 132 values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  79) Service
       #pathValues("Department.employees.name")
         "before all" hook for "should get a list of 132 values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  80) Service
       #pathValues("Department.employees.name", {"Department.employees": "CEO"})
         "before all" hook for "should get a list of six values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  81) Service
       #pathValues("Department.employees.name", {"Department.employees": "CEO"}, cb)
         should find 6 CEOs, including Charles Miner:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/path-values.js)
  

  82) Service
       #pathValues(Path("Department.employees.name", {"Department.employees": "CEO"}))
         "before all" hook for "should get a list of six values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  83) Service
       #values("Department.employees.name", {"Department.employees": "CEO"})
         "before all" hook for "should get a list of six values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  84) Service
       #values(Path("Department.employees.name", {"Department.employees": "CEO"}))
         "before all" hook for "should get a list of six values":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  85) Query
       qids
         Getting an id
           "before all" hook for "should yield an id":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  86) Query
       qids
         Getting an id for the same query twice, same object
           "before all" hook for "should have fetched the same id twice":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  87) Query
       qids
         Getting an id for the same query twice, different objects
           "before all" hook for "should have fetched the same id twice":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  88) Query
       qids
         Getting an id for a different query should result in a different id
           "before all" hook for "should have fetched two different ids":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  89) Control query for escaped chars
       "before all" hook for "should find some employees":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  90) Querying for escaped values
       "before all" hook for "should find some employees":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  91) Query#isRelevant
       "before all" hook for "should find Employee.address relevant":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  92) Query#saveAsList
       saving older employees
         "before all" hook for "should exist":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  93) Query#saveAsList
       saving younger employees
         "before all" hook for "should exist":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  94) Control query for unicode
       "before all" hook for "should find some employees":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  95) Querying for unicode values
       "before all" hook for "should find some employees":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  96) Query
       #values
         "before all" hook for "should retrieve a list of ages":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  97) Service
       #values
         for queries
           "before all" hook for "should retrieve a list of ages":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  98) Service
       #values
         for queries with callbacks
           "before all" hook for "should retrieve a list of ages":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  99) Service
       #values
         for query parameters
           "before all" hook for "should retrieve a list of ages":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  100) Service
       #values
         for query parameters with callbacks
           "before all" hook for "should retrieve a list of ages":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  101) Service
       #values
         for string paths
           "before all" hook for "should find all the companies":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  102) Service
       #values
         for object paths
           "before all" hook for "should find all the companies":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  103) Query
       with-subclasses
         running a subclass query
           "before all" hook for "should find six ceos who work in departments":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  104) Query
       with-subclasses
         running a multi-type query
           "before all" hook for "ceos + contractors should = union":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  105) Service#search
       using the promise API
         to look for everything
           "before all" hook for "should find at least 100 things":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  106) Service#search
       using the promise API
         to look for David
           "before all" hook for "should find david and his department":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  107) Service#search
       using the promise API
         to look for HR
           "before all" hook for "should find 19 HR results when unconstrained":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  108) Service#search
       using the promise API
         to limit result count
           "before all" hook for "should paginate results":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  109) Service#search
       using the promise API
         to return correct subset
           "before all" hook for "should return the requested number of results":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  110) Service#search
       using the promise API
         to look for David, with a request object
           "before all" hook for "should find david and his department":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  111) Service#search
       using the promise API
         searcing by a specific type
           "before all" hook for "should find david's department":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  112) Service#search
       using the callback API
         to look for everything
           should find at least 100 things, and some banks:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/quick-search.js)
  

  113) Service#search
       using the callback API
         to look for David
           should find david and his department:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/quick-search.js)
  

  114) Service#search
       using the callback API
         searching by a specific type
           should find david's department, and no managers:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/quick-search.js)
  

  115) Service
       #records
         "before all" hook for "promises to return a list of employee records":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  116) Service
       #records with callbacks
         good requests
           yields a list of employee records:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/records.js)
  

  117) Service
       #records with callbacks
         bad requests
           yields errors in as the first parameter to the callback:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/records.js)
  

  118) Query
       #records
         "before all" hook for "promises to return a list of employee records":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  119) Query
       #records with callbacks
         yields a list of employees:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  120) Service#register
       registering a new user
         "before all" hook for "should create a user":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  121) Query
       "before each" hook for "should be able to remove a constraint":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  122) Query
       #rows()
         should return 46 rows, with a sum of 2688:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  123) Query
       #rows()
         should return 46 rows, with a sum of 2688, and work with callbacks:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  124) Query
       #eachRow
         should allow iteration per item:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  125) Query
       #eachRow
         should allow iteration per item with a single callback:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  126) Query
       #eachRow
         should allow iteration with promises:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  127) Service
       #rows()
         good requests
           accepts a query options object, and can run it as it would a query:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  128) Service
       #rows()
         good requests
           accepts a query options object, and can run it, accepting callbacks:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/rows.js)
  

  129) Service
       #rows()
         reasonable timeouts
           should succeed and get results:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  130) Service
       #rows()
         bad requests
           should yield an error as the first parameter to the callback:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/rows.js)
  

  131) Service
       #eachRow()
         good requests
           can run a query and yield each row:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  132) Service
       #eachRow()
         good requests
           can run a query and yield each row, and does not need a page:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  133) Service
       #eachRow()
         good requests
           accepts a query options object and can run it as a query, callbacks:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/rows.js)
  

  134) Service
       #eachRow()
         good requests
           accepts a query options object and can run it as a query, callbacks, no page:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/rows.js)
  

  135) Service
       #eachRow()
         good requests
           accepts a query options object and can run it as it would a query, callback:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  136) Service
       #eachRow()
         good requests
           accepts a query options object and can run it as it would a query, promise:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  137) Service
       #eachRow()
         bad requests
           should report the status code of a bad query:
     TypeError: Cannot read property 'should' of undefined
      at /home/laksh/Desktop/github/imjs-dep/test/compiled/rows.js:1:1
      at tryCatch (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at invokeCallback (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publish (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publishRejection (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at flush (node_modules/es6-promise/dist/es6-promise.js:128:5)
      at _combinedTickCallback (internal/process/next_tick.js:131:7)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  138) Service
       #eachRow()
         bad requests
           should trigger the error handler provided:
     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/rows.js)
  

  139) Static service properties:
       the version
         should resolve successfully:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  140) Static service properties:
       the version
         should yield a positive value:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  141) Static service properties:
       the version
         should support callbacks:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  142) Static service properties:
       the release
         should resolve successfully:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version/release: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  143) Static service properties:
       the release
         should equal "test":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version/release: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  144) Static service properties:
       the release
         should support callbacks:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version/release: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  145) Static service properties:
       the classkeys
         should resolve successfully:
     Error: Error: GET http://localhost:8080/intermine-demo/service/classkeys: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  146) Static service properties:
       the classkeys
         should have the classes property:
     Error: Error: GET http://localhost:8080/intermine-demo/service/classkeys: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  147) Static service properties:
       the classkeys
         should have a keys for employee:
     Error: Error: GET http://localhost:8080/intermine-demo/service/classkeys: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  148) Static service properties:
       the classkeys
         should support callbacks:
     Error: Error: GET http://localhost:8080/intermine-demo/service/version/release: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  149) Static service properties:
       the model
         should resolve successfully:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  150) Static service properties:
       the model
         should have the classes property:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  151) Static service properties:
       the model
         should have a positive number of classes:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  152) Static service properties:
       the model
         should support callbacks:
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  153) Static service properties:
       the summary fields
         should resolve successfully:
     Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080 (and Mocha's done() called multiple times)
  Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  154) Static service properties:
       the summary fields
         should have fields for Employee:
     Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080 (and Mocha's done() called multiple times)
  Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  155) Static service properties:
       the summary fields
         should have the expected fields for Employee:
     Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080 (and Mocha's done() called multiple times)
  Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  156) Static service properties:
       the summary fields
         should support callbacks:
     Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080 (and Mocha's done() called multiple times)
  Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  157) Static service properties:
       the summary fields
         should support callbacks:
     Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080 (and Mocha's done() called multiple times)
  Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  158) Service
       customHeaders
         override an authorization header:
     AssertionError: expected 'Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080' to start with 'Invalid request authentication.'
      at Assertion.fail (node_modules/should/cjs/should.js:1:1)
      at Assertion.value [as startWith] (node_modules/should/cjs/should.js:1:1)
      at /home/laksh/Desktop/github/imjs-dep/test/compiled/service.js:25:16
      at tryCatch (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at invokeCallback (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publish (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at publishRejection (node_modules/es6-promise/dist/es6-promise.js:1:1)
      at flush (node_modules/es6-promise/dist/es6-promise.js:128:5)
      at _combinedTickCallback (internal/process/next_tick.js:131:7)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  159) Service
       caching
         useCache
           "before each" hook for "should be true":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  160) Service
       caching
         flushCaches
           "before each" hook for "should mean we get fresh objects":
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  161) Service#eachRecord
       Params
         can yield each employee, using params:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/streams.js)
  

  162) Service#eachRecord
       Params
         can yield each employee, without needing a page, using params:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/streams.js)
  

  163) Service#eachRecord
       Params
         can yield a stream of employees, using params:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  164) Service#eachRecord
       Params
         can make use of pipes:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  165) Service#eachRecord
       Query
         can yield each employee, all parameters:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  166) Service#eachRecord
       Query
         can yield each employee, without needing a page:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  167) Service#eachRecord
       Query
         can yield a stream of employees, no callbacks:
     Error: Error: GET http://localhost:8080/intermine-demo/service/summaryfields: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  168) Query#eachRecord
       "before all" hook for "promises to return a stream over the employees":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  169) Query
       summary of numeric path
         "before each" hook for "should have fewer than 21 buckets":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  170) Query
       American English alias
         "before each" hook for "should include all the results of the query":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  171) Query
       summary of string path
         "before each" hook for "should have fewer than 21 buckets":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  172) Fetching templates
       "before all" hook for "should find some templates":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  173) Using templates
       "before all" hook for "should be just like using queries":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  174) TSV results
       "before all" hook in "TSV results":
     Error: Error: GET http://localhost:8080/intermine-demo/service/model: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  175) User#getToken
       A day token
         "before all" hook for "should not be the same as the permanent token":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  176) User#getToken
       Permanent tokens
         create a token
           "before all" hook for "should have created a token":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  177) User#getToken
       Permanent tokens
         create a token using the callback api
           should be able to use the callback api:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/user.js)
  

  178) User#getToken
       Permanent tokens
         create a couple of tokens
           "before all" hook for "should have created multiple tokens":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  179) User#getToken
       Permanent tokens
         revoke all tokens
           "before all" hook for "should be able to delete these tokens":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  180) User#getToken
       Permanent tokens
         revoke one token
           "before all" hook for "should have created multiple tokens, and revoked one":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  181) Service
       #manageUserPreferences
         promise api
           getting preferences
             "before each" hook for "should get an object, with no value for testpref":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  182) Service
       #manageUserPreferences
         promise api
           setting pref
             "before each" hook for "should find the prefs set correctly":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  183) Service
       #manageUserPreferences
         callback api
           getting preferences
             should get an object, with no value for testpref:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/userprefs.js)
  

  184) Service
       #manageUserPreferences
         callback api
           setting pref
             should find the prefs set correctly:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/userprefs.js)
  

  185) User: single preference management
       #setPreference(key: val)
         "before each" hook for "should have the right prefs set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  186) User: single preference management
       #setPreference(key, val)
         "before each" hook for "should have the right prefs set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  187) User: single preference management
       #setPreference([[key, val]])
         "before each" hook for "should have the right prefs set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  188) User: single preference management
       #clearPreference(key)
         "before each" hook for "should have the right prefs set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  189) User: preference management with callbacks
       #clearPreference(key)
         "before each" hook for "should have the right prefs set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  190) User: multiple preference management
       #setPreferences({a: val1, b: val2})
         "before each" hook for "should have both preferences set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  191) User: multiple preference management
       #setPreferences([[a, val1], [b, val2]])
         "before each" hook for "should have both preferences set":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  192) Service
       #whoami()
         "before all" hook for "should yield a user":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  

  193) Service
       #whoami(cb)
         should support the callback API:
     Error: Timeout of 30000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/laksh/Desktop/github/imjs-dep/test/compiled/who-am-i.js)
  

  194) Service
       #fetchUser()
         "before all" hook for "should yield a user":
     Error: Error: GET http://localhost:8080/intermine-demo/service/version: Error: connect ECONNREFUSED 127.0.0.1:8080
      at ClientRequest.<anonymous> (build/http.js:1:1)
      at Socket.socketErrorListener (_http_client.js:1:1)
      at emitErrorNT (internal/streams/destroy.js:28:3)
      at _combinedTickCallback (internal/process/next_tick.js:58:31)
      at process._tickDomainCallback (internal/process/next_tick.js:1:1)
  



Warning: Task "mochaTest:unit" failed. Use --force to continue.

Aborted due to warnings.
